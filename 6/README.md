У першому рефакторінгу проблему дублювання було вирішено шляхом об'єднання двох функцій в одну, яка отримала назву calculate_total_price. Ця функція тепер приймає додатковий аргумент tax_rate, який за замовчуванням дорівнює 0, якщо його не надано.

Структура коду була спрощена за рахунок видалення надлишкових блоків та оптимізації обчислення знижки всередині циклу. Тепер знижка застосовується безпосередньо до ціни перед додаванням її до загальної ціни. Такий підхід усуває дублювання коду і покращує читабельність.

Об'єднавши ці дві функції, ми гарантуємо, що будь-які майбутні зміни або вдосконалення потрібно буде вносити лише в одному місці, що зменшує ризик невідповідностей і полегшує обслуговування.


У другому рефакторінгу виклик функції _calculate_total_and_count в __init__ тепер зберігає результати в self.total та self.count, що дозволяє використовувати їх в інших методах без повторного обчислення. Ще було видалено повторний виклик _calculate_total_and_count в calculate_average та calculate_total, що зменшує кількість коду та збільшує продуктивність. 

Також була додана перевірка на порожність self.data в calculate_minimum та calculate_maximum, що дозволяє повертати None, якщо дані відсутні, а не видавати помилку.